<!-- timeline.component.html -->
<div class="scroll-bg"
     parallaxBg
     [ratio]="0.2"
     [textureHeight]="540"></div>

<section class="timeline-wrapper">

  <!-- Single *ngFor drives both events *and* screenshots -->
  <ng-container *ngFor="let item of items; let i = index">
    <div class="vertical-line"></div>
    <div class="vertical-line-wide"></div>
    <!-- Spacer div provides the gap for both types -->
    <div class="spacer" [style.height.px]="item.gap ?? 48"></div>

    <!-- Event card ----------------------------------------------------- -->
    <ng-container *ngIf="item.type === 'event' && item.year">
      <div class="event" [ngClass]="{ 'event-left': i % 2 === 0, 'event-right': i % 2 !== 0}">
        <div class="timeline-arm" [ngClass]="{ 'event-left': i % 2 === 0, 'event-right': i % 2 !== 0}">
          <img  [src]="i % 2 === 0 ? 'assets/images/arm.webp' : 'assets/images/arm2.webp'">
        </div>
        <span class="dot"></span>
        <span class="dot-center"></span>
        <div class="card">
          <h3>{{ item.year }} - {{ item.title }}</h3>
          <p>{{ item.text }}</p>
        </div>
      </div>
    </ng-container>

    <!-- Screenshot ----------------------------------------------------- -->
    <ng-container *ngIf="item.type === 'image' && item.src">
      <img
        class="screenshot"
        [class.left]="item.side === 'left'"
        [class.right]="item.side === 'right'"
        [class.center]="item.side === 'center'"
        [style.width.px]="item.width ?? 320"
        [style.top.px]="0"
        appParallax
        [ratio]="1.2"
        [src]="item.src"
        alt=""
      />
    </ng-container>

  </ng-container>
</section>
